<!---
---
デモ: タイトル: 'Microsoft Sentinel' ラーニング パス/モジュール/タイトル: 'ラーニング パス: Microsoft セキュリティ ソリューションの機能について説明する; モジュール 3: Microsoft Sentinel のセキュリティ機能について説明する; ユニット 3: Microsoft Sentinel の脅威検出および軽減機能について説明する'
---
--->

# デモ:Microsoft Sentinel

このデモは、次の Learn コンテンツに対応しています。

- ラーニング パス: Microsoft セキュリティ ソリューションの機能について説明する
- モジュール: Microsoft Sentinel のセキュリティ機能について説明する
- ユニット: Microsoft Sentinel の脅威検出および軽減機能について説明する

## デモ シナリオ

このデモでは、コンテンツ ハブを使用してデプロイ可能なパッケージ化されたソリューションを見つける方法など、Microsoft Sentinel で使用できるいくつかのオプションについて説明します。  ただし、まず、Microsoft Sentinel リソースにアクセスする必要があるユーザーに対して、ロールベースのアクセス制御のアクセス許可を設定するプロセスについて説明します。

### デモ パート 1

Microsoft Sentinel のインスタンスは、デモ前のセットアップの一環として既に作成されている必要があります。 作成されていることを確認してください。

1. ブラウザー タブ **[ホーム - Microsoft Azure]** を開きます。  タブを以前に閉じた場合は、ブラウザー ページを開き、アドレス バーに「 **https://portal.azure.com** 」と入力します。 認可されたラボ ホスター (ALH) から提供された Azure 資格情報を使用してサインインします。  これで、Azure サービスのホーム ページが表示されます。

1. ページ上部の "Microsoft Azure" と表示されている青色のバーの横にある検索ボックスに、「**Microsoft Sentinel**」と入力し、検索結果から **[Microsoft Sentinel]** を選択します。  

1. [Microsoft Sentinel] ページに Sentinel のインスタンスが一覧表示されるので、それを選択します。  一覧にない場合は、ここで作成してください。
    1. [Microsoft Sentinel] ページで、 **[Microsoft Sentinel の作成] を選択します**。

    1. [ワークスペースへの Microsoft Sentinel の追加] ページで、 **[新しいワークスペースの作成]** を選択します。 [Log Analytics ワークスペースの作成] の [基本] タブに、次の情報を入力します。
        1. サブスクリプション: 既定値のままにします。
        1. リソース グループ: **[新規作成]** を選択してから、名前「**SC900-Sentinel-RG**」を入力し、その後 **[OK]** を選択します。
        1. 名前: **SC900-LogAnalytics-workspace**.
        1. リージョン: **米国東部** (場所に基づいて別の既定のリージョンが選択されている場合があります)
        1. **[確認と作成]** を選択します (タグは構成されません)。
        1. 入力した情報を確認してから、**[作成]** を選択します。
        1. 1 つのワークスペースが一覧表示されるまでに、1 から 2 分かかる場合があります。それでも表示されない場合は、**[更新]** を選択してから、**[追加]** を選択します。
        1. 新しいワークスペースが追加されると、[Microsoft Sentinel |ニュース & ガイド] ページが表示され、Microsoft Sentinel の無料試用版がアクティブ化されていることを示します。  **[OK]** を選択します。

1. 後続のタスクで使用するため、このページは開いたままにしておきます。

### デモ パート 2

すべての Azure リソースと同様に、ユーザーが Microsoft Sentinel リソースにアクセスするための適切なアクセス許可を持っていることを確認する必要があります。 ここでは、ロールを割り当てる手順と、Microsoft Sentinel で使用できるロールを示します。  

1. 検索ボックスのページ上部にある [Microsoft Azure] と表示されている場所の隣の青色バーに、「**リソース グループ**」と入力し、検索結果で、**[リソース グループ]** を選択します。 リソース グループ レベルにロールを割り当てることで、Microsoft Sentinel をサポートするためにデプロイされるすべてのリソースにロールが適用されることが保証されます。

1. [リソース グループ] ページで、Microsoft Sentinel を使用して作成したリソース グループ **[SC900-Sentinel-RG]** を選択します。

1. [SC900-Sentinel-RG] ページの左ナビゲーション ウィンドウで、**[アクセス制御 (IAM)]** を選択します。

1. [アクセス制御] ページで、**[自分のアクセスの表示]** を選択します。  Skillable Cloud Slice サブスクリプションを使用している場合、ロールの割り当ては LOD 所有者に設定されます。これは、この Cloud Slice サブスクリプション用に構成されたカスタム ロールの割り当てであり、これによって必要なアクセス許可が付与されます。 ただし、デモを目的とする場合は、Sentinel 固有のロールを表示することをお勧めします。  ウィンドウの右上隅の **[X]** を選択して、割り当てウィンドウを閉じます。

    1. [アクセス制御] ページで、**[追加]** を選択してから、**[ロール割り当ての追加]** を選択します。

    1. [ロール割り当ての追加] ウィンドウが開きます。  検索ボックスに「**Microsoft Sentinel**」と入力して、Microsoft Sentinel に関連付けられているロールを確認します。
    1. 一覧表示されている任意のロールから、**表示**を選択してそのロールの詳細を表示します。  ベスト プラクティスとして、ロールに必要な最小特権を割り当てる必要があります。  

    1. ウィンドウの右上隅の **[X]** を選択して、ウィンドウを閉じます。

1. アクセスの制御ページから、ウィンドウの右上隅の **[X]** を選択して、ウィンドウを閉じます。

### デモ パート 3

デモのこの部分では、データ ソースに接続する手順を示します。 多くのデータ コネクタは、Microsoft Sentinel ソリューションの一部として、分析ルール、ブック、プレイブックなどの関連するコンテンツと共にデプロイされます。 Microsoft Sentinel のコンテンツ ハブは、すぐに使用できる (組み込みの) コンテンツを検出して管理するための一元的な場所です。 この手順では、コンテンツ ハブを使用して、Microsoft Sentinel 用の Microsoft Defender for Cloud ソリューションをデプロイします。  このソリューションを使用すると、Microsoft Defender for Cloud で報告されたセキュリティ アラートを取り込むことができます。

1. Microsoft Sentinel のブラウザー タブを開きます。

1. 左側のナビゲーション パネルで、 **[コンテンツ ハブ]** を選択します。

1. 少し下にスクロールすると、使用可能なソリューションの長い一覧と、一覧をフィルター処理するオプションが表示されます。  このデモでは、**Microsoft Defender for Cloud** を探します。  それを一覧から選択してください。  開いたサイド ウィンドウで、説明を読んでから **[インストール]** を選択します。  このソリューションには、1 つのデータ コネクタと 1 つの分析ルールが含まれています。 インストールには数分かかることがあります。  **[管理]** を選択します。

1. [Microsoft Defender for Cloud] と表示されている横にあるボックスを選択します。  ページの右側にウィンドウが開きます。  **[Open connector page](コネクタ ページを開く)** を選択します。

1. 構成の手順を確認します。  サブスクリプションの名前の横にあるボックスを選択し、 **[接続]** を選択します。  状態が [接続済み] に移行します。  これでコネクタが有効になりましたが、コネクタがデータ コネクタ ページに表示されるまでに少し時間がかかる場合があります。  

1. 次に、分析ルールに関する情報を確認します。  ページの上部 (階層リンク内) で、 **[Microsoft Defender for Cloud]** を選択します。  [Detect CoreBackUp Deletion Activity from related security alerts](関連するセキュリティ アラートから CoreBackUp 削除アクティビティを検出する) という表示の横にあるボックスを選択します。 開いたウィンドウに、ルールとその動作に関する情報が表示されます。  ルールを構成する手順を実行することもできます。  **注**: ルール ロジックの詳細は基礎の範囲を超えていますが、ルールの一部として構成できる情報の種類を表示できます。  
    1. **[構成]** を選択します。
    1. **[Detect CoreBackUp Deletion Activity from related security alerts](関連するセキュリティ アラートから CoreBackUp 削除アクティビティを検出する)** ルールを選択します。
    1. ページの右側に開いたウィンドウで、 **[ルールの作成]** を選択します。
    1. 各構成ページの概要を簡単に確認し、 **[レビューと作成]** を選択し、 **[保存]** を選択します。

1. ページの上部の [Analytics rules](分析ルール) という表示の上にある階層リンクから、 **[Microsoft Sentinel | Content hub](Microsoft Sentinel | コンテンツ ハブ)** を選択して [Sentinel] ページに戻ります。

1. コンテンツ ハブを使用することで、ソリューションを簡単かつ迅速にデプロイできることを示します。

1. 次のタスクで使用するため、このページは開いたままにしておきます。

### デモ パート 4

デモのこのパートでは、Sentinel で使用できるオプションの一部を示します。

1. 左側のナビゲーション ウィンドウから、 **[ハンティング]** を選択します。  ページの上部にある **[クエリ]** タブを選択します。ハンティング クエリの説明を読みます。 ハンティング クエリは、コンテンツ ハブを介して追加できます。 以前にインストールされたクエリが、ここに一覧表示されます。 **[Go to content hub](コンテンツ ハブに移動)** を選択します。  コンテンツ ハブには、ソリューションの一部として、またはスタンドアロン クエリとしてクエリを含むコンテンツが一覧表示されます。  下スクロールすると、使用可能なオプションが表示されます。

1. 左側のナビゲーション ウィンドウから、 **[MITRE ATT&CK]** を選択します。  MITRE ATT&CK は、攻撃者がよく使う戦術と手法の、一般公開されているナレッジ ベースです。 Microsoft Sentinel を使うと、MITRE ATT&CK® フレームワークの戦術と手法に基づいて、ご自分のワークスペース内で既にアクティブになっている検出と構成可能な検出を確認し、組織のセキュリティ カバレッジを把握することができます。  マトリックスから任意のセルを選択し、画面の右側にある情報に注目してください。  

1. 左側のナビゲーション ウィンドウから、 **[コミュニティ]** を選択します。 Microsoft のセキュリティ アナリストは、新しいブック、プレイブック、ハンティング クエリなどを絶えず作成および追加し、お客様の環境で使用できるようにコミュニティに投稿しています。 プライベート コミュニティの GitHub リポジトリからサンプル コンテンツをダウンロードして、Microsoft Sentinel 用のカスタム ブック、捜索クエリ、ノートブック、プレイブックを作成できます。  **[Onboard community content](コミュニティのコンテンツをオンボードする)** を選択します。  GitHub リポジトリへの新しいタブが開き、シナリオを有効にするためのコンテンツをダウンロードできます。  ブラウザーで Azure のタブに戻ります。

1. 左ナビゲーション ウィンドウで、**[分析]** を選択します。  2 つのアクティブなルールがあるはずです。既定で使用できるルールと、前のタスクで作成したルールです。 既定のルール **[Advanced Multistage Attack Detection](高度なマルチステージ攻撃の検出)** を選択します。  詳細情報に注目してください。  Microsoft Sentinel では、スケーラブルな機械学習アルゴリズムに基づく相関関係エンジンである Fusion を使用して、キル チェーンのさまざまな段階で観察される異常な動作と疑わしいアクティビティの組み合わせを特定することによって、マルチステージ攻撃 (永続的脅威とも呼ばれます) を自動的に検出します。 これらの検出を基に、Microsoft Sentinel では、Microsoft Sentinel 以外では検出が困難であろうインシデントが生成されます。

1. 左ナビゲーション ウィンドウで、**[自動化]** を選択します。  ここでは、単純な自動化ルールを作成したり、既存のプレイブックと統合したり、新しいプレイブックを作成したりできます。  **[+ 作成]** を選択し、 **[Automation rule](自動化ルール)** を選択します。  画面の右側に表示されるウィンドウと、条件とアクションを作成するために使用できるオプションに注目してください。  画面の下部で、 **[キャンセル]** を選択します。

1. 左ナビゲーション パネルで、**[ブック]** を選択します。 Microsoft Sentinel ブックの説明を読みます。  ブックは、コンテンツ ハブを介して追加できます。以前にインストールしたブックが、ここに一覧表示されます。 **[Go to content hub](コンテンツ ハブに移動)** を選択します。  コンテンツ ハブには、ソリューションの一部として、またはスタンドアロン ブックとしてブックを含むコンテンツが一覧表示されます。 下スクロールすると、使用可能なオプションが表示されます。

1. ウィンドウの右上隅の **[X]** を選択して、ウィンドウを閉じます。

1. ウィンドウの左上隅にある青いバーのすぐ下にある **[ホーム]** を選択して、Azure portal のホーム ページに戻ります。  

### 確認

このデモでは、Microsoft Sentinel をデータ ソースに接続する手順について説明し、ブックをセットアップし、Microsoft Sentinel で使用できるいくつかのオプションについて説明しました。
